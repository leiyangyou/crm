%br

.subtitle
  = t(:versions)
.log#states
  .list#states
    - object.membership_states.each do |membership_state|
      %li{:class =>membership_state.state_type}
        %span.created_at
          = "#{membership_state.created_at.to_date}:"
        - case membership_state.state_type
          - when MembershipState::TYPES::ACTIVE
            %span.type
              = "#{MembershipType.find_by_id(membership_state.type_id).try(:name)}"
            %span.range
              = "#{membership_state.started_on} - #{membership_state.finished_on}"
          - when MembershipState::TYPES::SUSPENDED
            %span.range
              = "#{membership_state.started_on} - #{membership_state.finished_on}"
          - when MembershipState::TYPES::TRANSFERRED
            %span.transfer_target
              - account = Account.find_by_id(membership_state.target_id)
              = link_to account.name, account_path(account)
          - when MembershipState::TYPES::TERMINATED
            = "#{membership_state.reason}"
        %span.contract
          - if membership_state.contract_id
            = link_to membership_state.contract_id, contract_path(:id => membership_state.contract_id)
