%li.highlight[account]
  - if account.contracts.membership_contracts.unsigned.count > 0
    .strip{:class => "pending"} #{t :pending}
  - elsif membership = account.membership
    .strip{:class => membership.status} #{t(membership.status)}
  - else
    .strip{:style => "color: gray;"} #{t :nonmember}

  %ul.tools
    = hook(:account_tools_before, self, :account => account)

    - if can?(:update, account)
      %li= link_to_edit(account)

    - if can?(:destroy, account)
      %li= link_to_delete(account)

  .indent
    = link_to(account.name, account)
    &ndash;
    %tt
      = account.location << ", " unless account.location.blank?
      = t(:added_by, :time_ago => time_ago_in_words(account.created_at), :user => (account.user.id == @current_user.id ? t(:me) : account.user.full_name))

    - unless @current_user.preference[:accounts_outline] == "brief"
      %dt
        = stars_for(account)
        = " | ".html_safe << link_to(account.website, account.website.to_url) if account.website.present?
        = " | ".html_safe << link_to_email(account.email) if account.email.present?
        = " | ".html_safe << t(:phone_small) << ": " << (account.toll_free_phone? ? account.toll_free_phone : account.phone) if account.toll_free_phone? || account.phone?

      - if account.tag_list.present?
        %dt
          .tags= tags_for_index(account)

      = hook(:account_bottom, self, :account => account)
